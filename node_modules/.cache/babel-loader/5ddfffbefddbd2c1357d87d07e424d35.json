{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { deleteDetails } from '@/api/index';\nimport service from '@/utils/service';\nimport Aside from '@/components/Aside.vue';\nexport default {\n  name: 'MyMedicine',\n  components: {\n    Aside\n  },\n\n  data() {\n    return {\n      selectdata: [],\n      tableData: [{\n        name: '前交叉重建术后',\n        symptom: '有膝部 膝前痛',\n        equipment: '膝关节伸展设备',\n        create_date: '2022-3-7',\n        operate: '编辑 删除'\n      }],\n      queryParams: {\n        name: ''\n      },\n      // 对话弹框\n      dialogFormVisible: false,\n      form: {\n        name: '',\n        symptom: '',\n        equipment: ''\n      },\n      formLabelWidth: '120px',\n      disease_position: '',\n      disease_sort: '',\n      prescription_id: ''\n    };\n  },\n\n  created() {\n    this.disease_position = this.$route.query.disease_position;\n    this.disease_sort = this.$route.query.disease_sort;\n    this.prescription_id = this.$route.query.prescription_id;\n  },\n\n  mounted() {\n    this.getData();\n  },\n\n  methods: {\n    // 根据名字模糊查询处方\n    getPrescriptionByName() {\n      service({\n        url: '/specialist/prescription/getPrescriptionByName',\n        params: {\n          name: this.queryParams.name,\n          prescription_id: this.prescription_id\n        }\n      }).then(res => {\n        console.log(res);\n        this.tableData = res.data;\n      });\n    },\n\n    // 获取列表数据\n    getData() {\n      service({\n        url: '/specialist/prescription/viewDetails',\n        params: {\n          prescription_id: this.$route.query.prescription_id\n        }\n      }).then(res => {\n        this.tableData = res.data;\n      });\n    },\n\n    // 编辑处方\n    editMedicine(index, data) {\n      this.$router.push({\n        path: '/kfstage',\n        query: {\n          id: data.id,\n          name: data.name,\n          disease_sort: this.$route.query.disease_sort,\n          disease_position: this.$route.query.disease_position\n        }\n      });\n    },\n\n    // 新增=>(获取处方id) 疾病诊断/处方 (弹框)\n    addMedicine() {\n      this.dialogFormVisible = true;\n    },\n\n    // 确定按钮之后,新增疾病诊断/处方 ,并跳转到康复阶段\n    saveBtn() {\n      this.dialogFormVisible = false;\n      service({\n        url: '/specialist/prescription/saveDetails',\n        method: 'post',\n        params: {\n          prescription_id: this.$route.query.prescription_id,\n          name: this.form.name,\n          symptom: this.form.symptom,\n          equipment: this.form.equipment\n        }\n      }).then(res => {\n        this.tableData.push(res.data);\n\n        if (res.code == 200) {\n          this.getData();\n          this.$message({\n            message: '新增成功',\n            type: 'success'\n          });\n        } // this.getData()\n\n      });\n      /* this.$router.push({\r\n        path: '/kfstage'\r\n      }) */\n    },\n\n    // 单条删除处方\n    deleteMedicine(index, data) {\n      console.log(index, data.id);\n      let result = [];\n      result.push(data.id);\n      let obj = {\n        ids: data.id\n      };\n      deleteDetails(obj).then(res => {\n        if (res.code == 200) {\n          this.getData();\n          this.$message({\n            message: '删除成功',\n            type: 'success'\n          });\n        }\n      });\n    },\n\n    selectchange(val) {\n      console.log(val);\n      this.selectdata = val;\n    },\n\n    // 批量删除\n    deleteLot() {\n      if (this.selectdata.length) {\n        var list = [];\n        this.selectdata.forEach(ele => {\n          list.push(ele.id);\n        });\n        deleteDetails({\n          ids: list.join(',')\n        }).then(res => {\n          if (res.code == 200) {\n            this.getData();\n            this.$message({\n              message: '删除成功',\n              type: 'success'\n            });\n          }\n        });\n      }\n    },\n\n    goback() {\n      this.$router.push('/');\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAoFA;AACA;AACA;AACA;EACAA,kBADA;EAEAC;IAAAC;EAAA,CAFA;;EAGAC;IACA;MACAC,cADA;MAEAC,YACA;QACAL,eADA;QAEAM,kBAFA;QAGAC,oBAHA;QAIAC,uBAJA;QAKAC;MALA,CADA,CAFA;MAWAC;QACAV;MADA,CAXA;MAcA;MACAW,wBAfA;MAgBAC;QACAZ,QADA;QAEAM,WAFA;QAGAC;MAHA,CAhBA;MAqBAM,uBArBA;MAsBAC,oBAtBA;MAuBAC,gBAvBA;MAwBAC;IAxBA;EA0BA,CA9BA;;EA+BAC;IACA;IACA;IACA;EACA,CAnCA;;EAoCAC;IACA;EACA,CAtCA;;EAuCAC;IACA;IACAC;MACAC;QACAC,qDADA;QAEAC;UACAvB,2BADA;UAEAgB;QAFA;MAFA,GAMAQ,IANA,CAMAC;QACAC;QACA;MACA,CATA;IAUA,CAbA;;IAcA;IACAC;MACAN;QACAC,2CADA;QAEAC;UACAP;QADA;MAFA,GAKAQ,IALA,CAKAC;QACA;MACA,CAPA;IAQA,CAxBA;;IAyBA;IACAG;MACA;QACAC,gBADA;QAEAC;UACAC,WADA;UAEA/B,eAFA;UAGAe,4CAHA;UAIAD;QAJA;MAFA;IASA,CApCA;;IAqCA;IACAkB;MACA;IACA,CAxCA;;IAyCA;IACAC;MACA;MACAZ;QACAC,2CADA;QAEAY,cAFA;QAGAX;UACAP,kDADA;UAEAhB,oBAFA;UAGAM,0BAHA;UAIAC;QAJA;MAHA,GASAiB,IATA,CASAC;QACA;;QACA;UACA;UACA;YACAU,eADA;YAEAC;UAFA;QAIA,CARA,CASA;;MACA,CAnBA;MAoBA;AACA;AACA;IACA,CAnEA;;IAqEA;IACAC;MACAX;MACA;MACAY;MACA;QACAC;MADA;MAGAC;QACA;UACA;UACA;YACAL,eADA;YAEAC;UAFA;QAIA;MACA,CARA;IASA,CAtFA;;IAuFAK;MACAf;MACA;IACA,CA1FA;;IA2FA;IACAgB;MACA;QACA;QACA;UACAC;QACA,CAFA;QAGAH;UAAAD;QAAA;UACA;YACA;YACA;cACAJ,eADA;cAEAC;YAFA;UAIA;QACA,CARA;MASA;IACA,CA5GA;;IA6GAQ;MACA;IACA;;EA/GA;AAvCA","names":["name","components","Aside","data","selectdata","tableData","symptom","equipment","create_date","operate","queryParams","dialogFormVisible","form","formLabelWidth","disease_position","disease_sort","prescription_id","created","mounted","methods","getPrescriptionByName","service","url","params","then","res","console","getData","editMedicine","path","query","id","addMedicine","saveBtn","method","message","type","deleteMedicine","result","ids","deleteDetails","selectchange","deleteLot","list","goback"],"sourceRoot":"src/views/expert","sources":["SickList.vue"],"sourcesContent":["<template>\r\n  <div class=\"content-box\">\r\n    <div class=\"content\">\r\n      <div class=\"content-head\">\r\n        <div class=\"one\">\r\n          <span class=\"title\">新增处方-{{disease_sort}}-{{disease_position}}</span>\r\n          <span style=\"position:absolute;right:30px;\" @click=\"goback\">\r\n            <span>\r\n              <img src=\"@/assets/img/goback.png\" alt=\"\">\r\n            </span>\r\n            <el-button type=\"text\" style=\"color:#BCA791;font-size: 14px;\">返回列表</el-button>\r\n          </span>\r\n        </div>\r\n        <div class=\"two\">\r\n\r\n          <el-form :inline=\"true\">\r\n            <el-form-item>\r\n              <el-button style=\"background-color: #F49B4D;color: #FFF;\" @click=\"addMedicine\">新增</el-button>\r\n              <el-button style=\"border-color: #F49B4D;color:#F49B4D;\" @click=\"deleteLot\">批量删除</el-button>\r\n            </el-form-item>\r\n            <el-form-item label=\"处方名称：\" style=\"margin-left: 300px;\">\r\n              <el-input placeholder=\"请输入查询\" v-model=\"queryParams.name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button @click=\"getPrescriptionByName\" class=\"nextStep\">查询</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n\r\n        </div>\r\n      </div>\r\n      <el-table @selection-change=\"selectchange\" ref=\"multipleTable\" :data=\"tableData\" tooltip-effect=\"dark\" :header-cell-style=\"{background:'#EBE0D8',color:'#000000'}\">\r\n        <el-table-column type=\"selection\" width=\"55\">\r\n        </el-table-column>\r\n        <el-table-column label=\"序号\" width=\"120\" type=\"index\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"name\" label=\"处方名称\" width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"symptom\" label=\"适用症\" show-overflow-tooltip>\r\n        </el-table-column>\r\n        <el-table-column prop=\"equipment\" label=\"推荐设备\" show-overflow-tooltip>\r\n        </el-table-column>\r\n        <el-table-column prop=\"create_date\" label=\"创建时间\" show-overflow-tooltip>\r\n        </el-table-column>\r\n        <el-table-column prop=\"operate\" label=\"操作\" show-overflow-tooltip>\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" style=\"color:#BCA791\" size=\"mini\" @click=\"editMedicine(scope.$index, scope.row)\">编辑</el-button>\r\n            <el-button type=\"text\" style=\"color:#BCA791\" size=\"mini\" @click=\"deleteMedicine(scope.$index, scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页器 -->\r\n      <!--   <el-pagination background layout=\"prev, pager, next\" :total=\"1000\">\r\n      </el-pagination> -->\r\n\r\n      <!-- 对话弹框 -->\r\n      <template>\r\n        <el-dialog title=\"新增康复疾病\" :visible.sync=\"dialogFormVisible\" width=\"30%\" center>\r\n          <el-form :model=\"form\">\r\n            <el-form-item label=\"处方名称：\" :label-width=\"formLabelWidth\">\r\n              <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"适用症：\" :label-width=\"formLabelWidth\">\r\n              <el-input v-model=\"form.symptom\" autocomplete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"推荐设备：\" :label-width=\"formLabelWidth\">\r\n              <el-select v-model=\"form.equipment\" placeholder=\"膝关节屈曲设备\">\r\n                <el-option label=\"膝关节屈曲设备\" value=\"膝关节屈曲设备\"></el-option>\r\n                <el-option label=\"膝关节伸展设备\" value=\"膝关节伸展设备\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"saveBtn\">保 存</el-button>\r\n          </div>\r\n        </el-dialog>\r\n      </template>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { deleteDetails } from '@/api/index'\r\nimport service from '@/utils/service'\r\nimport Aside from '@/components/Aside.vue'\r\nexport default {\r\n  name: 'MyMedicine',\r\n  components: { Aside },\r\n  data() {\r\n    return {\r\n      selectdata: [],\r\n      tableData: [\r\n        {\r\n          name: '前交叉重建术后',\r\n          symptom: '有膝部 膝前痛',\r\n          equipment: '膝关节伸展设备',\r\n          create_date: '2022-3-7',\r\n          operate: '编辑 删除'\r\n        }\r\n      ],\r\n      queryParams: {\r\n        name: ''\r\n      },\r\n      // 对话弹框\r\n      dialogFormVisible: false,\r\n      form: {\r\n        name: '',\r\n        symptom: '',\r\n        equipment: ''\r\n      },\r\n      formLabelWidth: '120px',\r\n      disease_position: '',\r\n      disease_sort: '',\r\n      prescription_id: ''\r\n    }\r\n  },\r\n  created() {\r\n    this.disease_position = this.$route.query.disease_position\r\n    this.disease_sort = this.$route.query.disease_sort\r\n    this.prescription_id = this.$route.query.prescription_id\r\n  },\r\n  mounted() {\r\n    this.getData()\r\n  },\r\n  methods: {\r\n    // 根据名字模糊查询处方\r\n    getPrescriptionByName() {\r\n      service({\r\n        url: '/specialist/prescription/getPrescriptionByName',\r\n        params: {\r\n          name: this.queryParams.name,\r\n          prescription_id: this.prescription_id\r\n        }\r\n      }).then(res => {\r\n        console.log(res)\r\n        this.tableData = res.data\r\n      })\r\n    },\r\n    // 获取列表数据\r\n    getData() {\r\n      service({\r\n        url: '/specialist/prescription/viewDetails',\r\n        params: {\r\n          prescription_id: this.$route.query.prescription_id\r\n        }\r\n      }).then(res => {\r\n        this.tableData = res.data\r\n      })\r\n    },\r\n    // 编辑处方\r\n    editMedicine(index, data) {\r\n      this.$router.push({\r\n        path: '/kfstage',\r\n        query: {\r\n          id: data.id,\r\n          name: data.name,\r\n          disease_sort: this.$route.query.disease_sort,\r\n          disease_position: this.$route.query.disease_position\r\n        }\r\n      })\r\n    },\r\n    // 新增=>(获取处方id) 疾病诊断/处方 (弹框)\r\n    addMedicine() {\r\n      this.dialogFormVisible = true\r\n    },\r\n    // 确定按钮之后,新增疾病诊断/处方 ,并跳转到康复阶段\r\n    saveBtn() {\r\n      this.dialogFormVisible = false\r\n      service({\r\n        url: '/specialist/prescription/saveDetails',\r\n        method: 'post',\r\n        params: {\r\n          prescription_id: this.$route.query.prescription_id,\r\n          name: this.form.name,\r\n          symptom: this.form.symptom,\r\n          equipment: this.form.equipment\r\n        }\r\n      }).then(res => {\r\n        this.tableData.push(res.data)\r\n        if (res.code == 200) {\r\n          this.getData()\r\n          this.$message({\r\n            message: '新增成功',\r\n            type: 'success'\r\n          })\r\n        }\r\n        // this.getData()\r\n      })\r\n      /* this.$router.push({\r\n        path: '/kfstage'\r\n      }) */\r\n    },\r\n\r\n    // 单条删除处方\r\n    deleteMedicine(index, data) {\r\n      console.log(index, data.id)\r\n      let result = []\r\n      result.push(data.id)\r\n      let obj = {\r\n        ids: data.id\r\n      }\r\n      deleteDetails(obj).then(res => {\r\n        if (res.code == 200) {\r\n          this.getData()\r\n          this.$message({\r\n            message: '删除成功',\r\n            type: 'success'\r\n          })\r\n        }\r\n      })\r\n    },\r\n    selectchange(val) {\r\n      console.log(val)\r\n      this.selectdata = val\r\n    },\r\n    // 批量删除\r\n    deleteLot() {\r\n      if (this.selectdata.length) {\r\n        var list = []\r\n        this.selectdata.forEach(ele => {\r\n          list.push(ele.id)\r\n        })\r\n        deleteDetails({ ids: list.join(',') }).then(res => {\r\n          if (res.code == 200) {\r\n            this.getData()\r\n            this.$message({\r\n              message: '删除成功',\r\n              type: 'success'\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n    goback() {\r\n      this.$router.push('/')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n.content {\r\n  border-radius: 10px;\r\n  box-shadow: 3px 3px rgb(247, 239, 239);\r\n}\r\n.content-head {\r\n  padding-top: 20px;\r\n}\r\n.content-head .title {\r\n  font-size: 18px;\r\n  color: orange;\r\n}\r\n.content-head .one {\r\n  padding: 0 30px;\r\n}\r\n.content-head input {\r\n  width: 150px;\r\n  height: 30px;\r\n  border: 1px solid #ccc;\r\n}\r\n.two {\r\n  padding-left: 30px;\r\n  margin: 10px 0;\r\n}\r\n.two span:nth-child(2) {\r\n  margin-left: 300px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}