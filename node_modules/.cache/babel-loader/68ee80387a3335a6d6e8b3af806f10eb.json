{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { deleteDetails } from '@/api/index';\nimport service from '@/utils/service';\nimport Aside from '@/components/Aside.vue';\nexport default {\n  name: 'Kfprocess',\n  components: {\n    Aside\n  },\n\n  data() {\n    return {\n      selectdata: [],\n      tableData: [{\n        name: '前交叉重建术后',\n        symptom: '有膝部 膝前痛',\n        equipment: '膝关节伸展设备',\n        create_date: '2022-3-7',\n        operate: '编辑 删除'\n      }],\n      queryParams: {\n        name: ''\n      },\n      // 对话弹框\n      dialogFormVisible: false,\n      form: {\n        name: '',\n        symptom: '',\n        equipment: ''\n      },\n      formLabelWidth: '120px',\n      disease_position: '',\n      disease_sort: '',\n      prescription_id: ''\n    };\n  },\n\n  created() {\n    this.disease_position = this.$route.query.disease_position;\n    this.disease_sort = this.$route.query.disease_sort;\n    this.prescription_id = this.$route.query.prescription_id;\n  },\n\n  mounted() {\n    this.getData();\n  },\n\n  methods: {\n    // 根据名字模糊查询处方\n    getPrescriptionByName() {\n      service({\n        url: '/specialist/prescription/getPrescriptionByName',\n        params: {\n          name: this.queryParams.name,\n          prescription_id: this.prescription_id\n        }\n      }).then(res => {\n        console.log(res);\n        this.tableData = res.data;\n      });\n    },\n\n    // 获取列表数据\n    getData() {\n      service({\n        url: '/specialist/prescription/viewDetails',\n        params: {\n          prescription_id: this.$route.query.prescription_id\n        }\n      }).then(res => {\n        this.tableData = res.data;\n      });\n    },\n\n    // 编辑处方\n    editMedicine(index, data) {\n      this.$router.push({\n        path: '/kfstage',\n        query: {\n          id: data.id,\n          name: data.name,\n          disease_sort: this.$route.query.disease_sort,\n          disease_position: this.$route.query.disease_position\n        }\n      });\n    },\n\n    // 新增=>(获取处方id) 疾病诊断/处方 (弹框)\n    addMedicine() {\n      this.dialogFormVisible = true;\n    },\n\n    // 确定按钮之后,新增疾病诊断/处方 ,并跳转到康复阶段\n    saveBtn() {\n      this.dialogFormVisible = false;\n      service({\n        url: '/specialist/prescription/saveDetails',\n        method: 'post',\n        params: {\n          prescription_id: this.$route.query.prescription_id,\n          name: this.form.name,\n          symptom: this.form.symptom,\n          equipment: this.form.equipment\n        }\n      }).then(res => {\n        this.tableData.push(res.data);\n\n        if (res.code == 200) {\n          this.getData();\n          this.$message({\n            message: '新增成功',\n            type: 'success'\n          });\n        } // this.getData()\n\n      });\n      /* this.$router.push({\n            path: '/kfstage'\n          }) */\n    },\n\n    // 单条删除处方\n    deleteMedicine(index, data) {\n      console.log(index, data.id);\n      let result = [];\n      result.push(data.id);\n      let obj = {\n        ids: data.id\n      };\n      deleteDetails(obj).then(res => {\n        if (res.code == 200) {\n          this.getData();\n          this.$message({\n            message: '删除成功',\n            type: 'success'\n          });\n        }\n      });\n    },\n\n    selectchange(val) {\n      console.log(val);\n      this.selectdata = val;\n    },\n\n    // 批量删除\n    deleteLot() {\n      if (this.selectdata.length) {\n        var list = [];\n        this.selectdata.forEach(ele => {\n          list.push(ele.id);\n        });\n        deleteDetails({\n          ids: list.join(',')\n        }).then(res => {\n          if (res.code == 200) {\n            this.getData();\n            this.$message({\n              message: '删除成功',\n              type: 'success'\n            });\n          }\n        });\n      }\n    },\n\n    goback() {\n      this.$router.push('/');\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAiFA;AACA;AACA;AACA;EACAA,iBADA;EAEAC;IAAAC;EAAA,CAFA;;EAGAC;IACA;MACAC,cADA;MAEAC,YACA;QACAL,eADA;QAEAM,kBAFA;QAGAC,oBAHA;QAIAC,uBAJA;QAKAC;MALA,CADA,CAFA;MAWAC;QACAV;MADA,CAXA;MAcA;MACAW,wBAfA;MAgBAC;QACAZ,QADA;QAEAM,WAFA;QAGAC;MAHA,CAhBA;MAqBAM,uBArBA;MAsBAC,oBAtBA;MAuBAC,gBAvBA;MAwBAC;IAxBA;EA0BA,CA9BA;;EA+BAC;IACA;IACA;IACA;EACA,CAnCA;;EAoCAC;IACA;EACA,CAtCA;;EAuCAC;IACA;IACAC;MACAC;QACAC,qDADA;QAEAC;UACAvB,2BADA;UAEAgB;QAFA;MAFA,GAMAQ,IANA,CAMAC;QACAC;QACA;MACA,CATA;IAUA,CAbA;;IAcA;IACAC;MACAN;QACAC,2CADA;QAEAC;UACAP;QADA;MAFA,GAKAQ,IALA,CAKAC;QACA;MACA,CAPA;IAQA,CAxBA;;IAyBA;IACAG;MACA;QACAC,gBADA;QAEAC;UACAC,WADA;UAEA/B,eAFA;UAGAe,4CAHA;UAIAD;QAJA;MAFA;IASA,CApCA;;IAqCA;IACAkB;MACA;IACA,CAxCA;;IAyCA;IACAC;MACA;MACAZ;QACAC,2CADA;QAEAY,cAFA;QAGAX;UACAP,kDADA;UAEAhB,oBAFA;UAGAM,0BAHA;UAIAC;QAJA;MAHA,GASAiB,IATA,CASAC;QACA;;QACA;UACA;UACA;YACAU,eADA;YAEAC;UAFA;QAIA,CARA,CASA;;MACA,CAnBA;MAoBA;AACA;AACA;IACA,CAnEA;;IAqEA;IACAC;MACAX;MACA;MACAY;MACA;QACAC;MADA;MAGAC;QACA;UACA;UACA;YACAL,eADA;YAEAC;UAFA;QAIA;MACA,CARA;IASA,CAtFA;;IAuFAK;MACAf;MACA;IACA,CA1FA;;IA2FA;IACAgB;MACA;QACA;QACA;UACAC;QACA,CAFA;QAGAH;UAAAD;QAAA;UACA;YACA;YACA;cACAJ,eADA;cAEAC;YAFA;UAIA;QACA,CARA;MASA;IACA,CA5GA;;IA6GAQ;MACA;IACA;;EA/GA;AAvCA","names":["name","components","Aside","data","selectdata","tableData","symptom","equipment","create_date","operate","queryParams","dialogFormVisible","form","formLabelWidth","disease_position","disease_sort","prescription_id","created","mounted","methods","getPrescriptionByName","service","url","params","then","res","console","getData","editMedicine","path","query","id","addMedicine","saveBtn","method","message","type","deleteMedicine","result","ids","deleteDetails","selectchange","deleteLot","list","goback"],"sourceRoot":"src/views/doctor","sources":["Kfprocess.vue"],"sourcesContent":["<template>\n  <div class=\"content-box\">\n    <div class=\"content\">\n      <div class=\"content-head\">\n        <div class=\"one\">\n          <span class=\"title\">张三-康复进程</span>\n          <span style=\"position:absolute;right:30px;\" @click=\"goback\">\n            <span>\n              <img src=\"@/assets/img/goback.png\" alt=\"\">\n            </span>\n            <el-button type=\"text\" style=\"color:#BCA791;font-size: 14px;\">返回列表</el-button>\n          </span>\n        </div>\n        <div class=\"two\">\n\n          <el-form :inline=\"true\">\n            <el-form-item>\n              <el-button style=\"border-color: #F49B4D;color:#F49B4D;\" @click=\"deleteLot\">批量删除</el-button>\n            </el-form-item>\n            <el-form-item label=\"疾病处方：\" style=\"margin-left: 300px;\">\n              <el-select v-model=\"queryParams.name\" placeholder=\"前交叉韧带术后重建1\">\n                <el-option label=\"前交叉韧带术后重建2\" value=\"前交叉韧带术后重建2\"></el-option>\n                <el-option label=\"前交叉韧带术后重建3\" value=\"前交叉韧带术后重建3\"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item>\n              <el-button @click=\"getPrescriptionByName\" class=\"nextStep\">新的诊断</el-button>\n            </el-form-item>\n          </el-form>\n\n        </div>\n      </div>\n      <el-table @selection-change=\"selectchange\" ref=\"multipleTable\" :data=\"tableData\" tooltip-effect=\"dark\" :header-cell-style=\"{background:'#EBE0D8',color:'#000000'}\">\n        <af-table-column type=\"selection\" width=\"55\">\n        </af-table-column>\n        <af-table-column label=\"序号\" width=\"120\" type=\"index\">\n        </af-table-column>\n        <af-table-column prop=\"name\" label=\"疾病诊断名称\">\n        </af-table-column>\n        <af-table-column prop=\"operate\" label=\"操作\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" style=\"color:#BCA791\" size=\"mini\" @click=\"editMedicine(scope.$index, scope.row)\">查看</el-button>\n            <el-button type=\"text\" style=\"color:#BCA791\" size=\"mini\" @click=\"editMedicine(scope.$index, scope.row)\">启用</el-button>\n            <el-button type=\"text\" style=\"color:#BCA791\" size=\"mini\" @click=\"deleteMedicine(scope.$index, scope.row)\">删除</el-button>\n          </template>\n        </af-table-column>\n      </el-table>\n\n      <!-- 分页器 -->\n      <!--   <el-pagination background layout=\"prev, pager, next\" :total=\"1000\">\n          </el-pagination> -->\n\n      <!-- 对话弹框 -->\n      <template>\n        <el-dialog title=\"新增康复疾病\" :visible.sync=\"dialogFormVisible\" width=\"30%\" center>\n          <el-form :model=\"form\">\n            <el-form-item label=\"处方名称：\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"适用症：\" :label-width=\"formLabelWidth\">\n              <el-input v-model=\"form.symptom\" autocomplete=\"off\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"推荐设备：\" :label-width=\"formLabelWidth\">\n              <el-select v-model=\"form.equipment\" placeholder=\"膝关节屈曲设备\">\n                <el-option label=\"膝关节屈曲设备\" value=\"膝关节屈曲设备\"></el-option>\n                <el-option label=\"膝关节伸展设备\" value=\"膝关节伸展设备\"></el-option>\n              </el-select>\n            </el-form-item>\n          </el-form>\n          <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"saveBtn\">保 存</el-button>\n          </div>\n        </el-dialog>\n      </template>\n\n    </div>\n  </div>\n</template>\n    \n <script>\nimport { deleteDetails } from '@/api/index'\nimport service from '@/utils/service'\nimport Aside from '@/components/Aside.vue'\nexport default {\n  name: 'Kfprocess',\n  components: { Aside },\n  data() {\n    return {\n      selectdata: [],\n      tableData: [\n        {\n          name: '前交叉重建术后',\n          symptom: '有膝部 膝前痛',\n          equipment: '膝关节伸展设备',\n          create_date: '2022-3-7',\n          operate: '编辑 删除'\n        }\n      ],\n      queryParams: {\n        name: ''\n      },\n      // 对话弹框\n      dialogFormVisible: false,\n      form: {\n        name: '',\n        symptom: '',\n        equipment: ''\n      },\n      formLabelWidth: '120px',\n      disease_position: '',\n      disease_sort: '',\n      prescription_id: ''\n    }\n  },\n  created() {\n    this.disease_position = this.$route.query.disease_position\n    this.disease_sort = this.$route.query.disease_sort\n    this.prescription_id = this.$route.query.prescription_id\n  },\n  mounted() {\n    this.getData()\n  },\n  methods: {\n    // 根据名字模糊查询处方\n    getPrescriptionByName() {\n      service({\n        url: '/specialist/prescription/getPrescriptionByName',\n        params: {\n          name: this.queryParams.name,\n          prescription_id: this.prescription_id\n        }\n      }).then(res => {\n        console.log(res)\n        this.tableData = res.data\n      })\n    },\n    // 获取列表数据\n    getData() {\n      service({\n        url: '/specialist/prescription/viewDetails',\n        params: {\n          prescription_id: this.$route.query.prescription_id\n        }\n      }).then(res => {\n        this.tableData = res.data\n      })\n    },\n    // 编辑处方\n    editMedicine(index, data) {\n      this.$router.push({\n        path: '/kfstage',\n        query: {\n          id: data.id,\n          name: data.name,\n          disease_sort: this.$route.query.disease_sort,\n          disease_position: this.$route.query.disease_position\n        }\n      })\n    },\n    // 新增=>(获取处方id) 疾病诊断/处方 (弹框)\n    addMedicine() {\n      this.dialogFormVisible = true\n    },\n    // 确定按钮之后,新增疾病诊断/处方 ,并跳转到康复阶段\n    saveBtn() {\n      this.dialogFormVisible = false\n      service({\n        url: '/specialist/prescription/saveDetails',\n        method: 'post',\n        params: {\n          prescription_id: this.$route.query.prescription_id,\n          name: this.form.name,\n          symptom: this.form.symptom,\n          equipment: this.form.equipment\n        }\n      }).then(res => {\n        this.tableData.push(res.data)\n        if (res.code == 200) {\n          this.getData()\n          this.$message({\n            message: '新增成功',\n            type: 'success'\n          })\n        }\n        // this.getData()\n      })\n      /* this.$router.push({\n            path: '/kfstage'\n          }) */\n    },\n\n    // 单条删除处方\n    deleteMedicine(index, data) {\n      console.log(index, data.id)\n      let result = []\n      result.push(data.id)\n      let obj = {\n        ids: data.id\n      }\n      deleteDetails(obj).then(res => {\n        if (res.code == 200) {\n          this.getData()\n          this.$message({\n            message: '删除成功',\n            type: 'success'\n          })\n        }\n      })\n    },\n    selectchange(val) {\n      console.log(val)\n      this.selectdata = val\n    },\n    // 批量删除\n    deleteLot() {\n      if (this.selectdata.length) {\n        var list = []\n        this.selectdata.forEach(ele => {\n          list.push(ele.id)\n        })\n        deleteDetails({ ids: list.join(',') }).then(res => {\n          if (res.code == 200) {\n            this.getData()\n            this.$message({\n              message: '删除成功',\n              type: 'success'\n            })\n          }\n        })\n      }\n    },\n    goback() {\n      this.$router.push('/')\n    }\n  }\n}\n</script>\n    \n    <style lang=\"css\" scoped>\n.content {\n  border-radius: 10px;\n  box-shadow: 3px 3px rgb(247, 239, 239);\n}\n.content-head {\n  padding-top: 20px;\n}\n.content-head .title {\n  font-size: 18px;\n  color: orange;\n}\n.content-head .one {\n  padding: 0 30px;\n}\n.content-head input {\n  width: 150px;\n  height: 30px;\n  border: 1px solid #ccc;\n}\n.two {\n  padding-left: 30px;\n  margin: 10px 0;\n}\n.two span:nth-child(2) {\n  margin-left: 300px;\n}\n</style>"]},"metadata":{},"sourceType":"module"}