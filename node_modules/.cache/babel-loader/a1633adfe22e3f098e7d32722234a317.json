{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { addTrainDetail, deleteTrain, deleteTrainDetails, editTrainDetails, getEquipment, viewStageTrain, viewStages, addTrain, getTrainDetails, saveTrainDetail, saveTrainDetailContraindication, editTrainDetailContraindication } from '@/api/index';\nimport Aside from '@/components/Aside.vue';\nexport default {\n  name: 'KfuScheme',\n  components: {\n    Aside\n  },\n\n  data() {\n    return {\n      isActive: 0,\n      leftData: [],\n      stages: [{\n        stages_id: '',\n        train_id: ''\n      }],\n      equipmentNames: [],\n      isShow1: true,\n      isShow2: false,\n      isShow3: false,\n      activeName: 'first',\n      disease_position: '',\n      disease_sort: '',\n      name: '',\n      selectdata: [],\n      tableData1: [{\n        equipment: '',\n        type: '',\n        pattern: '',\n        parameter: ''\n      }],\n      tableData2: [],\n      tableData3: [],\n      // 对话弹框1\n      dialogFormVisible1: false,\n      formLabelWidth: '130px',\n      dialog1: {\n        type: '',\n        equipment: ''\n      },\n      // 对话弹框2\n      dialogFormVisible2: false,\n      dialog2: {\n        pattern: '',\n        start_position: '',\n        end_position: '',\n        strength: '',\n        set_number: '',\n        number: '',\n        intermission: '',\n        ratio: '',\n        resistance: '',\n        rhythm: {\n          start: '',\n          middle: '',\n          end: ''\n        },\n        duration: ''\n      },\n      // 对话弹框3\n      dialogFormVisible3: false,\n      dialog3: {\n        name: '',\n        radio: '',\n        standard: ''\n      },\n      // 编辑表格的 对话弹框4\n      dialogFormVisible4: false,\n      dialog4: {\n        id: '',\n        pattern: '',\n        start_position: '',\n        end_position: '',\n        strength: '',\n        set_number: '',\n        number: '',\n        intermission: '',\n        ratio: '',\n        resistance: '',\n        rhythm: {\n          start: '',\n          middle: '',\n          end: ''\n        },\n        duration: ''\n      },\n      // 表格禁忌症的编辑/查看 弹框5\n      dialogFormVisible5: false,\n      dialog5: {\n        limit1_weight: '',\n        limit1_load: '',\n        limit2_weight: '',\n        limit2_load: ''\n      },\n      // 新增训练次数的弹框 6\n      dialogFormVisible6: false,\n      dialog6: {\n        name: ''\n      }\n    };\n  },\n\n  created() {\n    this.disease_position = this.$route.query.disease_position;\n    this.disease_sort = this.$route.query.disease_sort;\n    this.name = this.$route.query.name;\n    this.getEquipmentName();\n    this.getData();\n  },\n\n  methods: {\n    handleNodeClick(data) {\n      let obj = {\n        prescription_details_id: this.$route.query.id\n      }; // 利用是否有id来判断，点击的是否为根节点 =>阶段\n\n      if (data.children) {\n        viewStages(obj).then(res => {\n          res.data.map(item => {\n            if (item.name === data.label) {\n              this.stages.stages_id = item.id;\n            }\n          });\n        });\n      } else {\n        // 点击的为子节点\n        this.stages.train_id = data.id;\n        this.getDataList();\n      }\n    },\n\n    //获取阶段的训练数据\n    getData() {\n      let obj = {\n        prescription_details_id: this.$route.query.id\n      }; // 加载阶段的训练次数\n\n      viewStageTrain(obj).then(res => {\n        this.leftData = res.data;\n      });\n    },\n\n    // 新增训练次数\n    saveBtn6() {\n      this.dialogFormVisible6 = false;\n      let obj = {\n        stage_id: this.stages.stages_id,\n        name: this.dialog6.name\n      };\n      addTrain(obj).then(res => {\n        console.log(res, '234567');\n\n        if (res.code == 200) {\n          this.getData();\n          this.$message({\n            type: 'success',\n            message: '新增成功'\n          });\n        }\n      });\n    },\n\n    appendNode(node, data) {\n      this.dialogFormVisible6 = true;\n    },\n\n    // 删除第n次训练次数\n    removeNode(node, data) {\n      let obj = {\n        id: data.id\n      };\n      deleteTrain(obj).then(res => {\n        console.log(res);\n\n        if (res.code == 200) {\n          this.getData();\n          this.$message({\n            type: 'success',\n            message: '删除成功'\n          });\n        }\n      });\n    },\n\n    // 获取数据列表\n    getDataList() {\n      let obj = {\n        train_id: this.stages.train_id\n      };\n      editTrainDetails(obj).then(res => {\n        this.tableData1 = res.data;\n      });\n    },\n\n    // 查询所有设备名称\n    getEquipmentName() {\n      getEquipment().then(res => {\n        this.equipmentNames = res.data;\n      });\n    },\n\n    // 表格的编辑按钮\n    editTrain(data) {\n      this.dialogFormVisible4 = true;\n      let obj = {\n        id: data.id\n      };\n      getTrainDetails(obj).then(res => {\n        console.log(res, '@!#$^%U');\n\n        if (res.code == 200) {\n          let rhythm = {\n            start: '',\n            middle: '',\n            end: ''\n          }; // res.data.rhythm = rhythm\n\n          if (res.data.rhythm) {\n            rhythm.start = res.data.rhythm.split('-')[0];\n            rhythm.middle = res.data.rhythm.split('-')[1];\n            rhythm.end = res.data.rhythm.split('-')[2];\n            res.data.rhythm = rhythm;\n          } else {\n            res.data.rhythm = rhythm;\n          }\n\n          this.dialog4 = Object.assign({}, res.data);\n\n          if (res.data.pattern === '等张模式') {\n            this.dialog4.pattern = 1;\n            this.isShow1 = true;\n            this.isShow2 = false;\n            this.isShow3 = false;\n          } else if (res.data.pattern === '等长模式') {\n            this.dialog4.pattern = 2;\n            this.isShow1 = false;\n            this.isShow2 = true;\n            this.isShow3 = false;\n          } else {\n            this.dialog4.pattern = 3;\n            this.isShow1 = false;\n            this.isShow2 = false;\n            this.isShow3 = true;\n          }\n        }\n      });\n    },\n\n    // 表格的编辑保存按钮\n    saveBtn4() {\n      let obj = {\n        id: this.dialog4.id,\n        type: this.dialog4.type,\n        equipment: this.dialog4.equipment,\n        pattern: this.dialog4.pattern,\n        start_position: this.dialog4.start_position,\n        end_position: this.dialog4.end_position,\n        strength: this.dialog4.strength,\n        set_number: this.dialog4.set_number,\n        //组数\n        number: this.dialog4.number,\n        //次数\n        intermission: this.dialog4.intermission,\n        //间歇\n        ratio: this.dialog4.ratio,\n        //离心向心比\n        resistance: this.dialog4.resistance,\n        //阻力\n        rhythm: this.dialog4.rhythm.start + '-' + this.dialog4.rhythm.middle + '-' + this.dialog4.rhythm.end,\n        duration: this.dialog4.duration //保持时间\n\n      };\n\n      if (obj.pattern == '1') {\n        obj.pattern = '等张模式';\n      } else if (obj.pattern == '2') {\n        obj.pattern = '等长模式';\n      } else if (obj.pattern == '3') {\n        obj.pattern = '等速模式';\n      }\n\n      console.log(obj);\n      saveTrainDetail(obj).then(res => {\n        if (res.code == 200) {\n          this.dialogFormVisible4 = false;\n          this.getDataList();\n        }\n      });\n    },\n\n    // 禁忌症编辑/查看\n    jinjiz(data) {\n      this.dialogFormVisible5 = true; // this.dialog5.id = data.id\n\n      let obj = {\n        stage_detail_id: data.id\n      };\n      editTrainDetailContraindication(obj).then(res => {\n        console.log(res, '124345768');\n\n        if (res.code == 200) {\n          // this.$set(this.dialog5, 'id', res.data[0].id)\n          this.dialog5 = Object.assign({}, res.data[0]);\n          console.log(this.dialog5, 'ty7u890-');\n        }\n      });\n    },\n\n    // 禁忌症编辑的保存按钮\n    saveBtn5() {\n      this.dialogFormVisible5 = false;\n      let obj = {\n        id: this.dialog5.id,\n        limit1_weight: this.dialog5.limit1_weight,\n        limit1_load: this.dialog5.limit1_load,\n        limit2_weight: this.dialog5.limit2_weight,\n        limit2_load: this.dialog5.limit2_weight\n      };\n      saveTrainDetailContraindication(obj).then(res => {\n        if (res.code == 200) {\n          console.log(res, 'bianji');\n          this.$message({\n            type: 'success',\n            message: '编辑成功'\n          });\n        }\n      });\n    },\n\n    radioChange(val) {\n      if (val == '1') {\n        this.isShow1 = true;\n        this.isShow2 = false;\n        this.isShow3 = false;\n      } else if (val == '2') {\n        this.isShow2 = true;\n        this.isShow1 = false;\n        this.isShow3 = false;\n      } else {\n        this.isShow3 = true;\n        this.isShow1 = false;\n        this.isShow2 = false;\n      }\n    },\n\n    // 点击选项卡处理事件\n    handleClick(tab, event) {\n      if (tab.name == 'first') {\n        this.activeName = 'first';\n      } else if (tab.name == 'second') {\n        this.activeName = 'second';\n      } else if (tab.name == 'third') {\n        this.activeName = 'third';\n      } else {\n        this.activeName = 'fourth';\n      }\n    },\n\n    // 新增运动疗法\n    addSport() {\n      this.dialogFormVisible1 = true;\n    },\n\n    // 新增选择该设备\n    chooseDevice() {\n      this.dialog1.equipment = '膝关节屈曲训练器';\n    },\n\n    // 添加测训单元的保存\n    saveBtn() {\n      this.dialogFormVisible2 = false;\n      let obj = {\n        train_id: this.stages.train_id,\n        type: this.dialog1.type,\n        equipment: this.dialog1.equipment,\n        pattern: this.dialog2.pattern,\n        start_position: this.dialog2.start_position,\n        end_position: this.dialog2.end_position,\n        strength: this.dialog2.strength,\n        set_number: this.dialog2.set_number,\n        //组数\n        number: this.dialog2.number,\n        //次数\n        intermission: this.dialog2.intermission,\n        //间歇\n        ratio: this.dialog2.ratio,\n        //离心向心比\n        resistance: this.dialog2.resistance,\n        //阻力\n        rhythm: this.dialog2.rhythm.start + '-' + this.dialog2.rhythm.middle + '-' + this.dialog2.rhythm.end,\n        duration: this.dialog2.duration //保持时间\n\n      };\n\n      if (obj.pattern == '1') {\n        obj.pattern = '等张模式';\n      } else if (obj.pattern == '2') {\n        obj.pattern = '等长模式';\n      } else if (obj.pattern == '3') {\n        obj.pattern = '等速模式';\n      }\n\n      console.log(obj, '23r4t5y6u');\n      addTrainDetail(JSON.stringify(obj)).then(res => {\n        if (res.code == 200) {\n          this.getDataList();\n          this.$message({\n            type: 'success',\n            message: '新增成功'\n          });\n        }\n      });\n    },\n\n    // 复制参数\n    copyParameter() {},\n\n    // 清空按钮\n    clearAll() {\n      this.dialogFormVisible2 = false;\n    },\n\n    selectchange(val) {\n      this.selectdata = val;\n    },\n\n    // 批量删除\n    deleteLot() {\n      let list = [];\n      this.selectdata.map(item => {\n        list.push(item.id);\n      });\n      let obj = {\n        ids: list.join(',')\n      };\n      deleteTrainDetails(obj).then(res => {\n        if (res.code == 200) {\n          this.getDataList();\n          this.$message({\n            type: 'success',\n            message: '删除成功'\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAucA;AACA;AACA;EACAA,iBADA;EAEAC;IAAAC;EAAA,CAFA;;EAGAC;IACA;MACAC,WADA;MAEAC,YAFA;MAGAC;QAAAC;QAAAC;MAAA,EAHA;MAIAC,kBAJA;MAKAC,aALA;MAMAC,cANA;MAOAC,cAPA;MAQAC,mBARA;MASAC,oBATA;MAUAC,gBAVA;MAWAf,QAXA;MAYAgB,cAZA;MAaAC,aACA;QACAC,aADA;QAEAC,QAFA;QAGAC,WAHA;QAIAC;MAJA,CADA,CAbA;MAqBAC,cArBA;MAsBAC,cAtBA;MAuBA;MACAC,yBAxBA;MAyBAC,uBAzBA;MA0BAC;QACAP,QADA;QAEAD;MAFA,CA1BA;MA8BA;MACAS,yBA/BA;MAgCAC;QACAR,WADA;QAEAS,kBAFA;QAGAC,gBAHA;QAIAC,YAJA;QAKAC,cALA;QAMAC,UANA;QAOAC,gBAPA;QAQAC,SARA;QASAC,cATA;QAUAC;UACAC,SADA;UAEAC,UAFA;UAGAC;QAHA,CAVA;QAeAC;MAfA,CAhCA;MAiDA;MACAC,yBAlDA;MAmDAC;QACA3C,QADA;QAEA4C,SAFA;QAGAC;MAHA,CAnDA;MAwDA;MACAC,yBAzDA;MA0DAC;QACAC,MADA;QAEA5B,WAFA;QAGAS,kBAHA;QAIAC,gBAJA;QAKAC,YALA;QAMAC,cANA;QAOAC,UAPA;QAQAC,gBARA;QASAC,SATA;QAUAC,cAVA;QAWAC;UACAC,SADA;UAEAC,UAFA;UAGAC;QAHA,CAXA;QAgBAC;MAhBA,CA1DA;MA4EA;MACAQ,yBA7EA;MA8EAC;QACAC,iBADA;QAEAC,eAFA;QAGAC,iBAHA;QAIAC;MAJA,CA9EA;MAoFA;MACAC,yBArFA;MAsFAC;QACAxD;MADA;IAtFA;EA0FA,CA9FA;;EA+FAyD;IACA;IACA;IACA;IACA;IACA;EACA,CArGA;;EAsGAC;IACAC;MACA;QACAC;MADA,EADA,CAIA;;MACA;QACAC;UACAC;YACA;cACA;YACA;UACA,CAJA;QAKA,CANA;MAOA,CARA,MAQA;QACA;QACA;QACA;MACA;IACA,CAnBA;;IAoBA;IACAC;MACA;QACAH;MADA,EADA,CAIA;;MACAI;QACA;MACA,CAFA;IAGA,CA7BA;;IA8BA;IACAC;MACA;MACA;QACAC,+BADA;QAEAlE;MAFA;MAIAmE;QACAC;;QACA;UACA;UACA;YACAjD,eADA;YAEAkD;UAFA;QAIA;MACA,CATA;IAUA,CA/CA;;IAgDAC;MACA;IACA,CAlDA;;IAmDA;IACAC;MACA;QACAvB;MADA;MAGAwB;QACAJ;;QACA;UACA;UACA;YACAjD,eADA;YAEAkD;UAFA;QAIA;MACA,CATA;IAUA,CAlEA;;IAoEA;IACAI;MACA;QACAjE;MADA;MAGAkE;QACA;MACA,CAFA;IAGA,CA5EA;;IA6EA;IACAC;MACAC;QACA;MACA,CAFA;IAGA,CAlFA;;IAmFA;IACAC;MACA;MACA;QACA7B;MADA;MAGA8B;QACAV;;QACA;UACA;YACA9B,SADA;YAEAC,UAFA;YAGAC;UAHA,EADA,CAMA;;UACA;YACAH;YACAA;YACAA;YACAyB;UACA,CALA,MAKA;YACAA;UACA;;UACA;;UACA;YACA;YACA;YACA;YACA;UACA,CALA,MAKA;YACA;YACA;YACA;YACA;UACA,CALA,MAKA;YACA;YACA;YACA;YACA;UACA;QACA;MACA,CAnCA;IAoCA,CA7HA;;IA8HA;IACAiB;MACA;QACA/B,mBADA;QAEA7B,uBAFA;QAGAD,iCAHA;QAIAE,6BAJA;QAKAS,2CALA;QAMAC,uCANA;QAOAC,+BAPA;QAQAC,mCARA;QAQA;QACAC,2BATA;QASA;QACAC,uCAVA;QAUA;QACAC,yBAXA;QAWA;QACAC,mCAZA;QAYA;QACAC,oGAbA;QAcAI,+BAdA,CAcA;;MAdA;;MAgBA;QACAuC;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;;MACAZ;MACAa;QACA;UACA;UACA;QACA;MACA,CALA;IAMA,CA9JA;;IA+JA;IACAC;MACA,+BADA,CAEA;;MACA;QACAC;MADA;MAGAC;QACAhB;;QACA;UACA;UACA;UACAA;QACA;MACA,CAPA;IAQA,CA9KA;;IA+KA;IACAiB;MACA;MACA;QACArC,mBADA;QAEAG,yCAFA;QAGAC,qCAHA;QAIAC,yCAJA;QAKAC;MALA;MAOAgC;QACA;UACAlB;UACA;YACAjD,eADA;YAEAkD;UAFA;QAIA;MACA,CARA;IASA,CAlMA;;IAmMAkB;MACA;QACA;QACA;QACA;MACA,CAJA,MAIA;QACA;QACA;QACA;MACA,CAJA,MAIA;QACA;QACA;QACA;MACA;IACA,CAjNA;;IAkNA;IACAC;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CA7NA;;IA8NA;IACAC;MACA;IACA,CAjOA;;IAkOA;IACAC;MACA;IACA,CArOA;;IAsOA;IACAC;MACA;MACA;QACAnF,8BADA;QAEAW,uBAFA;QAGAD,iCAHA;QAIAE,6BAJA;QAKAS,2CALA;QAMAC,uCANA;QAOAC,+BAPA;QAQAC,mCARA;QAQA;QACAC,2BATA;QASA;QACAC,uCAVA;QAUA;QACAC,yBAXA;QAWA;QACAC,mCAZA;QAYA;QACAC,oGAbA;QAcAI,+BAdA,CAcA;;MAdA;;MAgBA;QACAuC;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;;MACAZ;MACAwB;QACA;UACA;UACA;YACAzE,eADA;YAEAkD;UAFA;QAIA;MACA,CARA;IASA,CA1QA;;IA4QA;IACAwB,kBA7QA;;IA8QA;IACAC;MACA;IACA,CAjRA;;IAkRAC;MACA;IACA,CApRA;;IAqRA;IACAC;MACA;MACA;QACAC;MACA,CAFA;MAGA;QACAC;MADA;MAGAC;QACA;UACA;UACA;YACAhF,eADA;YAEAkD;UAFA;QAIA;MACA,CARA;IASA;;EAvSA;AAtGA","names":["name","components","Aside","data","isActive","leftData","stages","stages_id","train_id","equipmentNames","isShow1","isShow2","isShow3","activeName","disease_position","disease_sort","selectdata","tableData1","equipment","type","pattern","parameter","tableData2","tableData3","dialogFormVisible1","formLabelWidth","dialog1","dialogFormVisible2","dialog2","start_position","end_position","strength","set_number","number","intermission","ratio","resistance","rhythm","start","middle","end","duration","dialogFormVisible3","dialog3","radio","standard","dialogFormVisible4","dialog4","id","dialogFormVisible5","dialog5","limit1_weight","limit1_load","limit2_weight","limit2_load","dialogFormVisible6","dialog6","created","methods","handleNodeClick","prescription_details_id","viewStages","res","getData","viewStageTrain","saveBtn6","stage_id","addTrain","console","message","appendNode","removeNode","deleteTrain","getDataList","editTrainDetails","getEquipmentName","getEquipment","editTrain","getTrainDetails","saveBtn4","obj","saveTrainDetail","jinjiz","stage_detail_id","editTrainDetailContraindication","saveBtn5","saveTrainDetailContraindication","radioChange","handleClick","addSport","chooseDevice","saveBtn","addTrainDetail","copyParameter","clearAll","selectchange","deleteLot","list","ids","deleteTrainDetails"],"sourceRoot":"src/views/expert","sources":["KfuScheme.vue"],"sourcesContent":["<template>\r\n  <div class=\"content-box\">\r\n    <div class=\"head\">\r\n      <ul class=\"step\">\r\n        <li style=\"color:#BCA791;font-size:16px\">{{disease_sort}}-{{disease_position}}-{{name}}</li>\r\n        <li><span>1</span>康复阶段</li>\r\n        <li><span>2</span>禁忌症</li>\r\n        <li><span>3</span>康复评估</li>\r\n        <li><span style=\"background:#F49B4D;color: #000000;\">4</span>康复方案</li>\r\n      </ul>\r\n    </div>\r\n    <el-row type=\"flex\" style=\"height:100%\">\r\n      <el-col :span=\"4\">\r\n        <el-card class=\"left\" shadow=\"always\" style=\"margin:0 10px\">\r\n          <ul>\r\n            <li>\r\n              <el-tree :data=\"leftData\" accordion @node-click=\"handleNodeClick\" node-key=\"data.id\" highlight-current>\r\n                <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\r\n                  <span>{{ node.label }}</span>\r\n                  <span style=\"position:absolute;right:30px\">\r\n                    <el-button type=\"text\">\r\n                      <span v-if=\"!data.children\" class=\"add\" @click=\"() => removeNode(node,data)\">-</span>\r\n                      <span v-else class=\"add\" @click=\"() => appendNode(node,data)\">+</span>\r\n                    </el-button>\r\n                  </span>\r\n                </span>\r\n              </el-tree>\r\n            </li>\r\n            <!--   <li :class=\"{active : isActive===index }\" style=\"white-space: nowrap;text-overflow:ellipsis; overflow:hidden;\" v-for=\"(item,index) in stages\" @click=\"changeStages(index)\">\r\n              {{item.name}}\r\n            </li> -->\r\n          </ul>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"20\">\r\n        <el-card class=\"right\" shadow=\"always\" style=\"margin-right:10px;\">\r\n          <div class=\"right-head\">\r\n            <div class=\"right-two\">\r\n              <span>\r\n                <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n\r\n                  <el-tab-pane label=\"运动疗法\" name=\"first\">\r\n                    <el-table ref=\"multipleTable\" :data=\"tableData1\" @selection-change=\"selectchange\" tooltip-effect=\"dark\" style=\"width: 100%\" :header-cell-style=\"{background:'#EBE0D8',color:'#000000'}\">\r\n                      <af-table-column type=\"selection\">\r\n                      </af-table-column>\r\n                      <af-table-column label=\"序号\" type=\"index\">\r\n                      </af-table-column>\r\n                      <af-table-column prop=\"equipment\" label=\"训练名称\">\r\n                      </af-table-column>\r\n                      <af-table-column prop=\"type\" label=\"类型\">\r\n                      </af-table-column>\r\n                      <af-table-column prop=\"pattern\" label=\"模式\">\r\n                      </af-table-column>\r\n                      <af-table-column prop=\"parameter\" label=\"参数\" align=\"center\">\r\n                      </af-table-column>\r\n                      <af-table-column prop=\"operate\" label=\"操作\" align=\"center\" width=\"120\">\r\n                        <template slot-scope=\"scope\">\r\n                          <el-button type=\"text\" style=\"color:#BCA791\" size=\"mini\" @click=\"editTrain(scope.row)\">编辑</el-button>\r\n                          <el-button type=\"text\" style=\"color:#BCA791\" size=\"mini\" @click=\"jinjiz(scope.row)\">禁忌症</el-button>\r\n                        </template>\r\n                      </af-table-column>\r\n                    </el-table>\r\n                  </el-tab-pane>\r\n\r\n                  <el-tab-pane label=\"手法治疗\" name=\"second\" disabled>\r\n                  </el-tab-pane>\r\n\r\n                  <el-tab-pane label=\"物理因子\" name=\"third\" disabled>\r\n                  </el-tab-pane>\r\n\r\n                </el-tabs>\r\n              </span>\r\n              <span>\r\n                <el-button @click=\"addSport\" style=\"background:#F49B4D;color:#fff\">新增</el-button>\r\n                <el-button @click=\"deleteLot\" style=\"border-color:#F49B4D;color:#F49B4D\">批量删除</el-button>\r\n                <el-button style=\"background:#F49B4D;color:#fff\">预览</el-button>\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 运动疗法弹框 1-->\r\n    <template>\r\n      <el-dialog title=\"运动疗法\" :visible.sync=\"dialogFormVisible1\" width=\"40%\">\r\n        <el-form :model=\"dialog1\" :inline=\"true\">\r\n          <el-form-item label=\"类别：\" :label-width=\"formLabelWidth\">\r\n            <el-select v-model=\"dialog1.type\" placeholder=\"鹊动测训单元\">\r\n              <el-option label=\"鹊动测训单元\" value=\"鹊动测训单元\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item style=\"margin-left:120px\">\r\n            <el-button @click=\"dialogFormVisible2=true\" type=\"primary\">使用该设备</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div class=\"imgs\">\r\n          <div class=\"img\" @click=\"chooseDevice\">\r\n            <a>\r\n              <el-button type=\"text\" @click=\"dialogFormVisible3=true\">【查看】</el-button>\r\n            </a>\r\n            <img src=\"@/assets/img/GL.png\" alt=\"\" style=\"width:100px;height:100px\">\r\n            <span style=\"text-align: center\">设备名称</span>\r\n          </div>\r\n          <div class=\"img\">\r\n            <a>\r\n              <el-button type=\"text\">【查看】</el-button>\r\n            </a>\r\n            <img src=\"@/assets/img/GL.png\" alt=\"\" style=\"width:100px;height:100px\">\r\n            <span style=\"text-align: center\">设备名称</span>\r\n          </div>\r\n          <div class=\"img\">\r\n            <a>\r\n              <el-button type=\"text\">【查看】</el-button>\r\n            </a>\r\n            <img src=\"@/assets/img/GL.png\" alt=\"\" style=\"width:100px;height:100px\">\r\n            <span style=\"text-align: center\">设备名称</span>\r\n          </div>\r\n          <div class=\"img\">\r\n            <a>\r\n              <el-button type=\"text\">【查看】</el-button>\r\n            </a>\r\n            <img src=\"@/assets/img/GL.png\" alt=\"\" style=\"width:100px;height:100px\">\r\n            <span style=\"text-align: center\">设备名称</span>\r\n          </div>\r\n        </div>\r\n        <div slot=\"footer\" style=\"display: flex;justify-content: center;\">\r\n          <el-button type=\"primary\" @click=\"dialogFormVisible1=false\">关闭</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </template>\r\n\r\n    <!-- 使用该设备弹框 2-->\r\n\r\n    <el-dialog title=\"添加测训单元\" :visible.sync=\"dialogFormVisible2\" width=\"30%\" center>\r\n      <el-form :model=\"dialog2\">\r\n        <el-form-item label=\"类型：\" :label-width=\"formLabelWidth\">\r\n          <el-radio-group v-model=\"dialog2.pattern\" @change=\"radioChange\">\r\n            <el-radio :label=\"1\" value=\"等张\">等张</el-radio>\r\n            <el-radio :label=\"2\" value=\"等长\">等长</el-radio>\r\n            <el-radio :label=\"3\" value=\"等速\">等速</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <div class=\"show\" v-show=\"isShow1\">\r\n          <el-form-item label=\"起始位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.start_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"终末位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.end_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"强度：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.strength\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"组数：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.set_number\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"次数：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.number\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"间歇：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.intermission\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"阻力特征：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.resistance\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"节律：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.rhythm.start\" autocomplete=\"off\" style=\"width:70px\"></el-input> -\r\n            <el-input v-model=\"dialog2.rhythm.middle\" autocomplete=\"off\" style=\"width:70px\"></el-input> -\r\n            <el-input v-model=\"dialog2.rhythm.end\" autocomplete=\"off\" style=\"width:70px\"></el-input>\r\n          </el-form-item>\r\n\r\n          <div slot=\"footer\" class=\"dialog-footer\" style=\"display:flex;justify-content:center\">\r\n            <el-button type=\"primary\" @click=\"saveBtn\">保存</el-button>\r\n            <el-button type=\"primary\" @click=\"copyParameter\">复制参数</el-button>\r\n            <el-button type=\"primary\" @click=\"clearAll\">清空</el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"show\" v-show=\"isShow2\">\r\n          <el-form-item label=\"起始位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.start_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"终末位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.end_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"力量：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.strength\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"组数：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.set_number\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"保持时间：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.duration\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"间歇：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.intermission\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n\r\n          <div slot=\"footer\" class=\"dialog-footer\" style=\"display:flex;justify-content:center\">\r\n            <el-button type=\"primary\" @click=\"saveBtn\">保存</el-button>\r\n            <el-button type=\"primary\" @click=\"dialogFormVisible2 = false\">关闭</el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"show\" v-show=\"isShow3\">\r\n          <el-form-item label=\"起始位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.start_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"终末位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.end_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"速度：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.strength\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"组数：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.set_number\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"次数：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.number\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"间歇：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.intermission\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"离心向心比：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog2.ratio\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n\r\n          <div slot=\"footer\" class=\"dialog-footer\" style=\"display:flex;justify-content:center\">\r\n            <el-button type=\"primary\" @click=\"saveBtn\">保存</el-button>\r\n            <el-button type=\"primary\" @click=\"dialogFormVisible2 = false\">关闭</el-button>\r\n          </div>\r\n        </div>\r\n\r\n      </el-form>\r\n\r\n    </el-dialog>\r\n\r\n    <!-- 查看设备弹框 3 -->\r\n    <template>\r\n      <el-dialog title=\"运动疗法\" :visible.sync=\"dialogFormVisible3\" width=\"40%\">\r\n        <template slot=\"title\">\r\n          <span style=\"margin-right:20px\">运动疗法：</span>\r\n          <span style=\"margin-right:20px\">类别：</span>\r\n          <span> 坐位膝关节伸展</span>\r\n        </template>\r\n\r\n        <div style=\"display:flex;justify-content:left\">\r\n          <div class=\"img\">\r\n            <img src=\"@/assets/img/video.jpg\" alt=\"\" style=\"\">\r\n          </div>\r\n          <div class=\"description\">\r\n            描述....\r\n            description....\r\n          </div>\r\n        </div>\r\n        <div slot=\"footer\">\r\n          <el-button type=\"primary\" @click=\"dialogFormVisible3=false\">关闭</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </template>\r\n\r\n    <!-- 表格编辑弹框 4 -->\r\n    <el-dialog title=\"添加测训单元\" :visible.sync=\"dialogFormVisible4\" width=\"30%\" center>\r\n      <el-form :model=\"dialog4\">\r\n        <el-form-item label=\"类型：\" :label-width=\"formLabelWidth\">\r\n          <el-radio-group v-model=\"dialog4.pattern\" @change=\"radioChange\">\r\n            <el-radio :label=\"1\" value=\"等张\">等张</el-radio>\r\n            <el-radio :label=\"2\" value=\"等长\">等长</el-radio>\r\n            <el-radio :label=\"3\" value=\"等速\">等速</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <div class=\"show\" v-show=\"isShow1\">\r\n          <el-form-item label=\"起始位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.start_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"终末位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.end_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"强度：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.strength\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"组数：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.set_number\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"次数：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.number\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"间歇：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.intermission\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"离心向心比:\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.ratio\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"阻力特征：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.resistance\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"节律：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.rhythm.start\" autocomplete=\"off\" style=\"width:70px\"></el-input> -\r\n            <el-input v-model=\"dialog4.rhythm.middle\" autocomplete=\"off\" style=\"width:70px\"></el-input> -\r\n            <el-input v-model=\"dialog4.rhythm.end\" autocomplete=\"off\" style=\"width:70px\"></el-input>\r\n          </el-form-item>\r\n\r\n          <div slot=\"footer\" class=\"dialog-footer\" style=\"display:flex;justify-content:center\">\r\n            <el-button type=\"primary\" @click=\"saveBtn4\">保存</el-button>\r\n            <el-button type=\"primary\" @click=\"copyParameter\">复制参数</el-button>\r\n            <el-button type=\"primary\" @click=\"clearAll\">清空</el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"show\" v-show=\"isShow2\">\r\n          <el-form-item label=\"起始位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.start_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"终末位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.end_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"力量：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.strength\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"组数：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.set_number\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"保持时间：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.duration\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"间歇：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.intermission\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n\r\n          <div slot=\"footer\" class=\"dialog-footer\" style=\"display:flex;justify-content:center\">\r\n            <el-button type=\"primary\" @click=\"saveBtn4\">保存</el-button>\r\n            <el-button type=\"primary\" @click=\"dialogFormVisible4 = false\">关闭</el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"show\" v-show=\"isShow3\">\r\n          <el-form-item label=\"起始位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.start_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"终末位置：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.end_position\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"速度：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.strength\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"组数：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.set_number\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"次数：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.number\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"间歇：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.intermission\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"离心向心比：\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog4.ratio\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n\r\n          <div slot=\"footer\" class=\"dialog-footer\" style=\"display:flex;justify-content:center\">\r\n            <el-button type=\"primary\" @click=\"saveBtn4\">保存</el-button>\r\n            <el-button type=\"primary\" @click=\"dialogFormVisible4 = false\">关闭</el-button>\r\n          </div>\r\n        </div>\r\n\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n    <!-- 查看/编辑禁忌症 弹框5-->\r\n    <template>\r\n      <el-dialog title=\"禁忌症\" :visible.sync=\"dialogFormVisible5\" width=\"50%\" center>\r\n        <div style=\"display:flex;justify-content: space-around;\">\r\n          <el-form :model=\"dialog5\">\r\n            <el-form-item>\r\n              <span style=\"font-weight:700;font-size:18px;color: #000000;\">限制等级II</span>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-select v-model=\"dialog5.type1\" placeholder=\"限制重量\">\r\n                <el-option label=\"限制重量\" value=\"限制重量\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"上限负荷\" style=\"display:flex\">\r\n              <el-input style=\"width:80px\" v-model=\"dialog5.limit1_weight\"></el-input> % <el-select placeholder=\"BW\" v-model=\"dialog5.type2\" style=\"width:80px\">\r\n                <el-option label=\"BW\" value=\"BW\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-select placeholder=\"减少负荷\" v-model=\"dialog5.type6\">\r\n                <el-option v-model=\"dialog5.type3\" label=\"减少负荷\" value=\"减少负荷\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"强度减少\" :inline=\"true\">\r\n              <el-input style=\"width:80px\" v-model=\"dialog5.limit1_load\"></el-input>\r\n              %\r\n              <el-select placeholder=\"Fmax\" v-model=\"dialog5.type4\" style=\"width:80px\">\r\n                <el-option label=\"Fmax\" value=\"Fmax\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-form>\r\n          <el-form :model=\"dialog5\">\r\n            <el-form-item>\r\n              <span style=\"font-weight:700;font-size:18px;color: #000000;\">限制等级I</span>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-select v-model=\"dialog5.type1\" placeholder=\"限制重量\">\r\n                <el-option label=\"限制重量\" value=\"限制重量\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"上限负荷\" style=\"display:flex\">\r\n              <el-input style=\"width:80px\" v-model=\"dialog5.limit2_weight\"></el-input> % <el-select placeholder=\"BW\" v-model=\"dialog5.type2\" style=\"width:80px\">\r\n                <el-option label=\"BW\" value=\"BW\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-select placeholder=\"减少负荷\" v-model=\"dialog5.type5\">\r\n                <el-option v-model=\"dialog5.type3\" label=\"减少负荷\" value=\"减少负荷\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"强度减少\" :inline=\"true\">\r\n              <el-input style=\"width:80px\" v-model=\"dialog5.limit2_load\"></el-input>\r\n              % <el-select placeholder=\"Fmax\" v-model=\"dialog5.type4\" style=\"width:80px\">\r\n                <el-option label=\"Fmax\" value=\"Fmax\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n        <div slot=\"footer\" style=\"display: flex;justify-content: center;\">\r\n          <el-button type=\"primary\" @click=\"saveBtn5\">保存</el-button>\r\n          <el-button type=\"primary\" @click=\"dialogFormVisible5=false\">关闭</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </template>\r\n\r\n    <!-- 新增训练次数 弹框6-->\r\n    <template>\r\n      <el-dialog title=\"新增训练次数\" :visible.sync=\"dialogFormVisible6\" width=\"30%\" center>\r\n        <el-form :model=\"dialog6\">\r\n          <el-form-item label=\"训练名称\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"dialog6.name\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible6 = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"saveBtn6\">确认</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </template>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { addTrainDetail, deleteTrain, deleteTrainDetails, editTrainDetails, getEquipment, viewStageTrain, viewStages, addTrain, getTrainDetails, saveTrainDetail, saveTrainDetailContraindication, editTrainDetailContraindication } from '@/api/index'\r\nimport Aside from '@/components/Aside.vue'\r\nexport default {\r\n  name: 'KfuScheme',\r\n  components: { Aside },\r\n  data() {\r\n    return {\r\n      isActive: 0,\r\n      leftData: [],\r\n      stages: [{ stages_id: '', train_id: '' }],\r\n      equipmentNames: [],\r\n      isShow1: true,\r\n      isShow2: false,\r\n      isShow3: false,\r\n      activeName: 'first',\r\n      disease_position: '',\r\n      disease_sort: '',\r\n      name: '',\r\n      selectdata: [],\r\n      tableData1: [\r\n        {\r\n          equipment: '',\r\n          type: '',\r\n          pattern: '',\r\n          parameter: ''\r\n        }\r\n      ],\r\n      tableData2: [],\r\n      tableData3: [],\r\n      // 对话弹框1\r\n      dialogFormVisible1: false,\r\n      formLabelWidth: '130px',\r\n      dialog1: {\r\n        type: '',\r\n        equipment: ''\r\n      },\r\n      // 对话弹框2\r\n      dialogFormVisible2: false,\r\n      dialog2: {\r\n        pattern: '',\r\n        start_position: '',\r\n        end_position: '',\r\n        strength: '',\r\n        set_number: '',\r\n        number: '',\r\n        intermission: '',\r\n        ratio: '',\r\n        resistance: '',\r\n        rhythm: {\r\n          start: '',\r\n          middle: '',\r\n          end: ''\r\n        },\r\n        duration: ''\r\n      },\r\n      // 对话弹框3\r\n      dialogFormVisible3: false,\r\n      dialog3: {\r\n        name: '',\r\n        radio: '',\r\n        standard: ''\r\n      },\r\n      // 编辑表格的 对话弹框4\r\n      dialogFormVisible4: false,\r\n      dialog4: {\r\n        id: '',\r\n        pattern: '',\r\n        start_position: '',\r\n        end_position: '',\r\n        strength: '',\r\n        set_number: '',\r\n        number: '',\r\n        intermission: '',\r\n        ratio: '',\r\n        resistance: '',\r\n        rhythm: {\r\n          start: '',\r\n          middle: '',\r\n          end: ''\r\n        },\r\n        duration: ''\r\n      },\r\n      // 表格禁忌症的编辑/查看 弹框5\r\n      dialogFormVisible5: false,\r\n      dialog5: {\r\n        limit1_weight: '',\r\n        limit1_load: '',\r\n        limit2_weight: '',\r\n        limit2_load: ''\r\n      },\r\n      // 新增训练次数的弹框 6\r\n      dialogFormVisible6: false,\r\n      dialog6: {\r\n        name: ''\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.disease_position = this.$route.query.disease_position\r\n    this.disease_sort = this.$route.query.disease_sort\r\n    this.name = this.$route.query.name\r\n    this.getEquipmentName()\r\n    this.getData()\r\n  },\r\n  methods: {\r\n    handleNodeClick(data) {\r\n      let obj = {\r\n        prescription_details_id: this.$route.query.id\r\n      }\r\n      // 利用是否有id来判断，点击的是否为根节点 =>阶段\r\n      if (data.children) {\r\n        viewStages(obj).then(res => {\r\n          res.data.map(item => {\r\n            if (item.name === data.label) {\r\n              this.stages.stages_id = item.id\r\n            }\r\n          })\r\n        })\r\n      } else {\r\n        // 点击的为子节点\r\n        this.stages.train_id = data.id\r\n        this.getDataList()\r\n      }\r\n    },\r\n    //获取阶段的训练数据\r\n    getData() {\r\n      let obj = {\r\n        prescription_details_id: this.$route.query.id\r\n      }\r\n      // 加载阶段的训练次数\r\n      viewStageTrain(obj).then(res => {\r\n        this.leftData = res.data\r\n      })\r\n    },\r\n    // 新增训练次数\r\n    saveBtn6() {\r\n      this.dialogFormVisible6 = false\r\n      let obj = {\r\n        stage_id: this.stages.stages_id,\r\n        name: this.dialog6.name\r\n      }\r\n      addTrain(obj).then(res => {\r\n        console.log(res, '234567')\r\n        if (res.code == 200) {\r\n          this.getData()\r\n          this.$message({\r\n            type: 'success',\r\n            message: '新增成功'\r\n          })\r\n        }\r\n      })\r\n    },\r\n    appendNode(node, data) {\r\n      this.dialogFormVisible6 = true\r\n    },\r\n    // 删除第n次训练次数\r\n    removeNode(node, data) {\r\n      let obj = {\r\n        id: data.id\r\n      }\r\n      deleteTrain(obj).then(res => {\r\n        console.log(res)\r\n        if (res.code == 200) {\r\n          this.getData()\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功'\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    // 获取数据列表\r\n    getDataList() {\r\n      let obj = {\r\n        train_id: this.stages.train_id\r\n      }\r\n      editTrainDetails(obj).then(res => {\r\n        this.tableData1 = res.data\r\n      })\r\n    },\r\n    // 查询所有设备名称\r\n    getEquipmentName() {\r\n      getEquipment().then(res => {\r\n        this.equipmentNames = res.data\r\n      })\r\n    },\r\n    // 表格的编辑按钮\r\n    editTrain(data) {\r\n      this.dialogFormVisible4 = true\r\n      let obj = {\r\n        id: data.id\r\n      }\r\n      getTrainDetails(obj).then(res => {\r\n        console.log(res, '@!#$^%U')\r\n        if (res.code == 200) {\r\n          let rhythm = {\r\n            start: '',\r\n            middle: '',\r\n            end: ''\r\n          }\r\n          // res.data.rhythm = rhythm\r\n          if (res.data.rhythm) {\r\n            rhythm.start = res.data.rhythm.split('-')[0]\r\n            rhythm.middle = res.data.rhythm.split('-')[1]\r\n            rhythm.end = res.data.rhythm.split('-')[2]\r\n            res.data.rhythm = rhythm\r\n          } else {\r\n            res.data.rhythm = rhythm\r\n          }\r\n          this.dialog4 = Object.assign({}, res.data)\r\n          if (res.data.pattern === '等张模式') {\r\n            this.dialog4.pattern = 1\r\n            this.isShow1 = true\r\n            this.isShow2 = false\r\n            this.isShow3 = false\r\n          } else if (res.data.pattern === '等长模式') {\r\n            this.dialog4.pattern = 2\r\n            this.isShow1 = false\r\n            this.isShow2 = true\r\n            this.isShow3 = false\r\n          } else {\r\n            this.dialog4.pattern = 3\r\n            this.isShow1 = false\r\n            this.isShow2 = false\r\n            this.isShow3 = true\r\n          }\r\n        }\r\n      })\r\n    },\r\n    // 表格的编辑保存按钮\r\n    saveBtn4() {\r\n      let obj = {\r\n        id: this.dialog4.id,\r\n        type: this.dialog4.type,\r\n        equipment: this.dialog4.equipment,\r\n        pattern: this.dialog4.pattern,\r\n        start_position: this.dialog4.start_position,\r\n        end_position: this.dialog4.end_position,\r\n        strength: this.dialog4.strength,\r\n        set_number: this.dialog4.set_number, //组数\r\n        number: this.dialog4.number, //次数\r\n        intermission: this.dialog4.intermission, //间歇\r\n        ratio: this.dialog4.ratio, //离心向心比\r\n        resistance: this.dialog4.resistance, //阻力\r\n        rhythm: this.dialog4.rhythm.start + '-' + this.dialog4.rhythm.middle + '-' + this.dialog4.rhythm.end,\r\n        duration: this.dialog4.duration //保持时间\r\n      }\r\n      if (obj.pattern == '1') {\r\n        obj.pattern = '等张模式'\r\n      } else if (obj.pattern == '2') {\r\n        obj.pattern = '等长模式'\r\n      } else if (obj.pattern == '3') {\r\n        obj.pattern = '等速模式'\r\n      }\r\n      console.log(obj)\r\n      saveTrainDetail(obj).then(res => {\r\n        if (res.code == 200) {\r\n          this.dialogFormVisible4 = false\r\n          this.getDataList()\r\n        }\r\n      })\r\n    },\r\n    // 禁忌症编辑/查看\r\n    jinjiz(data) {\r\n      this.dialogFormVisible5 = true\r\n      // this.dialog5.id = data.id\r\n      let obj = {\r\n        stage_detail_id: data.id\r\n      }\r\n      editTrainDetailContraindication(obj).then(res => {\r\n        console.log(res, '124345768')\r\n        if (res.code == 200) {\r\n          // this.$set(this.dialog5, 'id', res.data[0].id)\r\n          this.dialog5 = Object.assign({}, res.data[0])\r\n          console.log(this.dialog5, 'ty7u890-')\r\n        }\r\n      })\r\n    },\r\n    // 禁忌症编辑的保存按钮\r\n    saveBtn5() {\r\n      this.dialogFormVisible5 = false\r\n      let obj = {\r\n        id: this.dialog5.id,\r\n        limit1_weight: this.dialog5.limit1_weight,\r\n        limit1_load: this.dialog5.limit1_load,\r\n        limit2_weight: this.dialog5.limit2_weight,\r\n        limit2_load: this.dialog5.limit2_weight\r\n      }\r\n      saveTrainDetailContraindication(obj).then(res => {\r\n        if (res.code == 200) {\r\n          console.log(res, 'bianji')\r\n          this.$message({\r\n            type: 'success',\r\n            message: '编辑成功'\r\n          })\r\n        }\r\n      })\r\n    },\r\n    radioChange(val) {\r\n      if (val == '1') {\r\n        this.isShow1 = true\r\n        this.isShow2 = false\r\n        this.isShow3 = false\r\n      } else if (val == '2') {\r\n        this.isShow2 = true\r\n        this.isShow1 = false\r\n        this.isShow3 = false\r\n      } else {\r\n        this.isShow3 = true\r\n        this.isShow1 = false\r\n        this.isShow2 = false\r\n      }\r\n    },\r\n    // 点击选项卡处理事件\r\n    handleClick(tab, event) {\r\n      if (tab.name == 'first') {\r\n        this.activeName = 'first'\r\n      } else if (tab.name == 'second') {\r\n        this.activeName = 'second'\r\n      } else if (tab.name == 'third') {\r\n        this.activeName = 'third'\r\n      } else {\r\n        this.activeName = 'fourth'\r\n      }\r\n    },\r\n    // 新增运动疗法\r\n    addSport() {\r\n      this.dialogFormVisible1 = true\r\n    },\r\n    // 新增选择该设备\r\n    chooseDevice() {\r\n      this.dialog1.equipment = '膝关节屈曲训练器'\r\n    },\r\n    // 添加测训单元的保存\r\n    saveBtn() {\r\n      this.dialogFormVisible2 = false\r\n      let obj = {\r\n        train_id: this.stages.train_id,\r\n        type: this.dialog1.type,\r\n        equipment: this.dialog1.equipment,\r\n        pattern: this.dialog2.pattern,\r\n        start_position: this.dialog2.start_position,\r\n        end_position: this.dialog2.end_position,\r\n        strength: this.dialog2.strength,\r\n        set_number: this.dialog2.set_number, //组数\r\n        number: this.dialog2.number, //次数\r\n        intermission: this.dialog2.intermission, //间歇\r\n        ratio: this.dialog2.ratio, //离心向心比\r\n        resistance: this.dialog2.resistance, //阻力\r\n        rhythm: this.dialog2.rhythm.start + '-' + this.dialog2.rhythm.middle + '-' + this.dialog2.rhythm.end,\r\n        duration: this.dialog2.duration //保持时间\r\n      }\r\n      if (obj.pattern == '1') {\r\n        obj.pattern = '等张模式'\r\n      } else if (obj.pattern == '2') {\r\n        obj.pattern = '等长模式'\r\n      } else if (obj.pattern == '3') {\r\n        obj.pattern = '等速模式'\r\n      }\r\n      console.log(obj, '23r4t5y6u')\r\n      addTrainDetail(JSON.stringify(obj)).then(res => {\r\n        if (res.code == 200) {\r\n          this.getDataList()\r\n          this.$message({\r\n            type: 'success',\r\n            message: '新增成功'\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    // 复制参数\r\n    copyParameter() {},\r\n    // 清空按钮\r\n    clearAll() {\r\n      this.dialogFormVisible2 = false\r\n    },\r\n    selectchange(val) {\r\n      this.selectdata = val\r\n    },\r\n    // 批量删除\r\n    deleteLot() {\r\n      let list = []\r\n      this.selectdata.map(item => {\r\n        list.push(item.id)\r\n      })\r\n      let obj = {\r\n        ids: list.join(',')\r\n      }\r\n      deleteTrainDetails(obj).then(res => {\r\n        if (res.code == 200) {\r\n          this.getDataList()\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功'\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"sass\" scoped>\r\n.add\r\n  width: 30px\r\n  height: 30px\r\n  border-radius: 15px\r\n  border: 1px solid orange\r\n  padding: 3px 8px\r\n  margin: 0 5px\r\n  background: #f49b4d\r\n  color: #fff\r\n\r\n.description\r\n  width: 200px\r\n  height: 200px\r\n  border: 1px solid #ccc\r\n  margin-left: 30px\r\n  margin-top: 10px\r\n\r\n.imgs\r\n  display: flex\r\n  justify-content: space-between\r\n\r\n  .img\r\n    display: flex\r\n    flex-direction: column\r\n    position: relative\r\n\r\n.img a\r\n  position: absolute\r\n  right: -10px\r\n  top: -8px\r\n\r\n.el-card\r\n  height: 100%\r\n\r\n.head\r\n  height: 35px\r\n  line-height: 35px\r\n  background: #fff\r\n  border: 1px solid #ddd\r\n  border-radius: 5px\r\n  padding: 10px\r\n  margin: 10px\r\n\r\n.step\r\n  display: flex\r\n  justify-content: space-between\r\n\r\n  .head & li span\r\n    width: 30px\r\n    height: 30px\r\n    border-radius: 15px\r\n    border: 1px solid orange\r\n    padding: 3px 8px\r\n    margin: 0 5px\r\n\r\n.content\r\n  display: flex\r\n\r\n  & .left\r\n    width: 20%\r\n    background-color: aliceblue\r\n    border-radius: 10px\r\n    box-shadow: 3px 3px rgb(247, 239, 239)\r\n    margin-right: 20px\r\n\r\n.left ul,\r\nli\r\n  list-style: none\r\n\r\n.left ul\r\n  width: 100%\r\n\r\n  & li\r\n    margin-top: 20px\r\n    text-align: center\r\n    font-size: 14px\r\n    line-height: 40px\r\n\r\n  & .active\r\n    background-color: #ffdab9\r\n\r\n.right\r\n  flex: 1\r\n  border-radius: 10px\r\n  box-shadow: 3px 3px rgb(247, 239, 239)\r\n\r\n  &-two\r\n    padding: 0 30px\r\n    position: relative\r\n\r\n  &-two span:nth-child(2)\r\n    position: absolute\r\n    right: 30px\r\n    top: 5px\r\n\r\n  &-head input\r\n    display: inline\r\n    width: 140px\r\n    height: 30px\r\n    border: 1px solid #ccc\r\n\r\n  &-two\r\n  /deep/ .el-tabs__item:hover \r\n    color: #f49b4d\r\n    cursor: pointer\r\n\r\n  &-two\r\n  /deep/ .el-tabs__item.is-active \r\n    color: #f49b4d\r\n</style>"]},"metadata":{},"sourceType":"module"}